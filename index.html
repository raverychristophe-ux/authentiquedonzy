import React, { useState, useEffect } from 'react';
import { 
  ChevronRight, 
  Menu, 
  X, 
  Calendar, 
  Users, 
  Heart, 
  CheckCircle, 
  Mail, 
  ArrowRight,
  Facebook,
  Twitter,
  Instagram,
  Linkedin,
  MapPin,
  Shield,
  Leaf,
  TrendingUp,
  GraduationCap,
  MessageSquare,
  Camera,
  UserCheck
} from 'lucide-react';

const App = () => {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [scrolled, setScrolled] = useState(false);

  // Gestion du scroll pour l'effet de la barre de navigation
  useEffect(() => {
    const handleScroll = () => {
      setScrolled(window.scrollY > 50);
    };
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const toggleMenu = () => setIsMenuOpen(!isMenuOpen);

  const scrollToSection = (id) => {
    setIsMenuOpen(false);
    const element = document.getElementById(id);
    if (element) {
      element.scrollIntoView({ behavior: 'smooth' });
    }
  };

  const menuItems = [
    { label: 'La Candidate', id: 'la-candidate' },
    { label: 'La Liste', id: 'la-liste' },
    { label: 'Programme', id: 'programme' },
    { label: 'Donzy en Images', id: 'galerie' },
    { label: 'Agir', id: 'agir' }
  ];

  const teamMembers = [
    { name: "Jean-Pierre Martin", role: "Expert en gestion publique", bio: "Ancien cadre administratif, passionné par le développement local." },
    { name: "Marie Dubois", role: "Actrice associative", bio: "Engagée depuis 15 ans dans le tissu culturel de Donzy." },
    { name: "Lucas Bernard", role: "Entrepreneur", bio: "Spécialiste de la transition énergétique et du commerce de proximité." },
    { name: "Sophie Petit", role: "Infirmière", bio: "Dévouée à la santé et au bien-être de nos aînés." },
    { name: "Thomas Roux", role: "Agriculteur", bio: "Garant de nos traditions rurales et de la qualité de nos terroirs." },
    { name: "Camille Morel", role: "Enseignante", bio: "Porteuse de projets innovants pour notre jeunesse." }
  ];

  const donzyGallery = [
    { title: "Le moulin et la rivière", img: "https://images.unsplash.com/photo-1500382017468-9049fed747ef?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" },
    { title: "Rues historiques", img: "https://images.unsplash.com/photo-1518391846015-55a9cb000b21?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" },
    { title: "Marché local", img: "https://images.unsplash.com/photo-1441974231531-c6227db76b6e?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" },
    { title: "Vie associative", img: "https://images.unsplash.com/photo-1529156069898-49953e39b3ac?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" },
    { title: "Nature environnante", img: "https://images.unsplash.com/photo-1488459716781-31db52582fe9?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" },
    { title: "Patrimoine", img: "https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" }
  ];

  const programs = [
    {
      icon: <Leaf className="w-8 h-8 text-emerald-600" />,
      title: "Donzy Verte",
      desc: "Préservation de nos cours d'eau, valorisation du patrimoine naturel et soutien à l'agriculture durable locale."
    },
    {
      icon: <Shield className="w-8 h-8 text-blue-600" />,
      title: "Sérénité Partagée",
      desc: "Renforcement de la présence municipale et modernisation de l'éclairage public pour la sécurité de tous."
    },
    {
      icon: <TrendingUp className="w-8 h-8 text-indigo-600" />,
      title: "Cœur de Bourg",
      desc: "Soutien aux commerçants donziais et aménagement de parkings facilitant l'accès aux commerces."
    },
    {
      icon: <GraduationCap className="w-8 h-8 text-rose-500" />,
      title: "Écoles & Familles",
      desc: "Rénovation thermique des classes et maintien de services publics de proximité pour les jeunes parents."
    }
  ];

  return (
    <div className="font-sans text-slate-800 bg-white min-h-screen selection:bg-blue-100">
      
      {/* --- Barre de Navigation --- */}
      <nav className={`fixed w-full z-50 transition-all duration-500 ${scrolled ? 'bg-white/95 backdrop-blur-md shadow-md py-3' : 'bg-transparent py-6'}`}>
        <div className="container mx-auto px-6 flex justify-between items-center">
          <div className="flex items-center space-x-3 cursor-pointer group" onClick={() => window.scrollTo({top: 0, behavior: 'smooth'})}>
            <div className="w-11 h-11 bg-blue-800 rounded-xl flex items-center justify-center text-white font-bold text-xl shadow-lg group-hover:rotate-6 transition-transform">
              AP
            </div>
            <div className={`font-black text-xl tracking-tighter leading-none ${scrolled ? 'text-slate-900' : 'text-white'}`}>
              AGATHE<br /><span className="text-blue-700">PERNOLLET</span>
            </div>
          </div>

          <div className="hidden lg:flex items-center space-x-8">
            {menuItems.map((item) => (
              <button 
                key={item.id}
                onClick={() => scrollToSection(item.id)}
                className={`font-bold text-sm uppercase tracking-widest hover:text-blue-700 transition-colors ${scrolled ? 'text-slate-600' : 'text-white/90 hover:text-white'}`}
              >
                {item.label}
              </button>
            ))}
          </div>

          <div className="lg:hidden">
            <button onClick={toggleMenu} className={`${scrolled ? 'text-slate-900' : 'text-white'}`}>
              {isMenuOpen ? <X size={32} /> : <Menu size={32} />}
            </button>
          </div>
        </div>

        {/* Menu Mobile */}
        {isMenuOpen && (
          <div className="lg:hidden bg-white absolute top-full left-0 w-full shadow-xl p-6 flex flex-col gap-4 animate-fade-in">
            {menuItems.map((item) => (
              <button 
                key={item.id}
                onClick={() => scrollToSection(item.id)}
                className="font-bold text-left text-slate-900 py-3 border-b border-slate-100"
              >
                {item.label}
              </button>
            ))}
          </div>
        )}
      </nav>

      {/* --- Section Hero --- */}
      <header className="relative h-screen flex items-center justify-center overflow-hidden">
        <div className="absolute inset-0 z-0">
          <img 
            src="https://images.unsplash.com/photo-1464822759023-fed622ff2c3b?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80" 
            alt="Paysage de Donzy" 
            className="w-full h-full object-cover"
          />
          <div className="absolute inset-0 bg-gradient-to-b from-slate-900/80 via-slate-900/40 to-white"></div>
        </div>

        <div className="container mx-auto px-6 relative z-10 text-center lg:text-left">
          <div className="max-w-4xl">
            <div className="inline-flex items-center gap-2 bg-blue-700 px-4 py-1.5 rounded-full text-white font-bold text-sm mb-8">
              Municipales 2026 • Donzy
            </div>
            {/* Slogan dynamique */}
            <h1 className="text-6xl md:text-8xl font-black text-white mb-8 leading-[0.9] tracking-tighter">
              DONZY, on y vit !
            </h1>
            <p className="text-xl md:text-3xl text-slate-100 mb-12 font-medium max-w-2xl leading-snug">
              Écrivons ensemble un nouveau chapitre pour notre commune, entre respect des traditions et modernité.
            </p>
            <div className="flex flex-col sm:flex-row gap-5 justify-center lg:justify-start">
              <button onClick={() => scrollToSection('agir')} className="bg-blue-700 hover:bg-blue-800 text-white px-10 py-5 rounded-2xl font-bold text-xl transition-all shadow-xl flex items-center justify-center gap-3 group">
                S'engager pour Donzy <ArrowRight className="group-hover:translate-x-2 transition-transform" />
              </button>
              <button onClick={() => scrollToSection('galerie')} className="bg-white/10 hover:bg-white/20 backdrop-blur-lg border-2 border-white/30 text-white px-10 py-5 rounded-2xl font-bold text-xl transition-all">
                Voir le village
              </button>
            </div>
          </div>
        </div>
      </header>

      {/* --- Section La Candidate --- */}
      <section id="la-candidate" className="py-32 bg-white">
        <div className="container mx-auto px-6">
          <div className="flex flex-col lg:flex-row items-center gap-20">
            <div className="lg:w-1/2 relative group">
              <div className="relative z-10 rounded-[3rem] overflow-hidden shadow-2xl border-[12px] border-white">
                <img 
                  src="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80" 
                  alt="Portrait Agathe Pernollet" 
                  className="w-full aspect-[4/5] object-cover transition-transform duration-700 group-hover:scale-105"
                />
              </div>
              <div className="absolute -bottom-10 -right-10 w-64 h-64 bg-blue-600 rounded-full mix-blend-multiply opacity-10 animate-pulse"></div>
              
              <div className="absolute bottom-10 left-10 z-20 bg-white/95 backdrop-blur-md p-8 rounded-3xl shadow-2xl max-w-xs border border-slate-100">
                <MessageSquare className="text-blue-700 mb-4" size={32} />
                <p className="font-serif italic text-lg text-slate-800 leading-relaxed">
                  "Donzy est mon ancrage. Mon projet est d'offrir à chaque Donziais une commune où il fait bon vivre."
                </p>
              </div>
            </div>
            
            <div className="lg:w-1/2">
              <div className="inline-block px-4 py-1 bg-blue-50 text-blue-800 font-bold rounded-lg mb-4">La Candidate</div>
              <h2 className="text-5xl md:text-7xl font-black text-slate-900 mb-8 tracking-tighter">Agathe Pernollet</h2>
              
              <div className="space-y-6 text-xl text-slate-600 leading-relaxed">
                <p className="font-bold text-slate-900">
                  Citoyenne engagée, Agathe met son expérience au service de Donzy.
                </p>
                <p>
                  Attachée à l'identité de notre village, elle souhaite revitaliser le centre-bourg tout en préservant le cadre de vie exceptionnel qui fait la fierté de Donzy. 
                </p>
                <p>
                  "Ma démarche est celle du dialogue. Je veux que la mairie redevienne un lieu d'accueil et de construction commune."
                </p>
              </div>
              
              <div className="mt-12 grid grid-cols-2 gap-6">
                <div className="flex items-center gap-4">
                  <div className="w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center text-blue-700"><CheckCircle size={24} /></div>
                  <span className="font-bold text-slate-800">Pragmatisme</span>
                </div>
                <div className="flex items-center gap-4">
                  <div className="w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center text-blue-700"><CheckCircle size={24} /></div>
                  <span className="font-bold text-slate-800">Écoute Active</span>
                </div>
              </div>

              <button className="mt-12 bg-slate-900 text-white px-10 py-5 rounded-2xl font-bold text-lg hover:bg-blue-800 transition-all shadow-xl flex items-center gap-3">
                Mon parcours pour Donzy <ChevronRight size={20} />
              </button>
            </div>
          </div>
        </div>
      </section>

      {/* --- Section La Liste --- */}
      <section id="la-liste" className="py-32 bg-white border-t border-slate-100">
        <div className="container mx-auto px-6">
          <div className="text-center max-w-3xl mx-auto mb-20">
            <div className="flex justify-center mb-6">
                <UserCheck className="text-blue-700" size={48} />
            </div>
            <h2 className="text-5xl font-black text-slate-900 mb-6 tracking-tighter">Une Équipe, une Vision</h2>
            <p className="text-xl text-slate-600">
              Des hommes et des femmes d'horizons divers, unis par un amour commun pour Donzy et une volonté d'agir.
            </p>
          </div>

          <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-10">
            {teamMembers.map((member, index) => (
              <div key={index} className="group p-8 bg-slate-50 rounded-[2rem] hover:bg-blue-700 transition-all duration-500 hover:-translate-y-2 shadow-sm hover:shadow-2xl">
                <h3 className="text-2xl font-black text-slate-900 mb-2 group-hover:text-white transition-colors">{member.name}</h3>
                <p className="text-blue-700 font-bold mb-4 group-hover:text-blue-200 transition-colors uppercase text-sm tracking-widest">{member.role}</p>
                <div className="w-10 h-1 bg-blue-700 group-hover:bg-white mb-6 transition-all group-hover:w-full"></div>
                <p className="text-slate-500 group-hover:text-blue-50 leading-relaxed transition-colors">
                  {member.bio}
                </p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* --- Section Programme --- */}
      <section id="programme" className="py-32 bg-slate-50">
        <div className="container mx-auto px-6">
          <div className="text-center max-w-3xl mx-auto mb-20">
            <h2 className="text-5xl font-black text-slate-900 mb-6 tracking-tighter text-center">Notre Programme</h2>
            <p className="text-xl text-slate-600 text-center">Concret, réaliste et tourné vers l'avenir.</p>
          </div>

          <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
            {programs.map((prog, index) => (
              <div key={index} className="group bg-white p-10 rounded-[2.5rem] shadow-sm hover:shadow-2xl transition-all duration-500 border border-slate-100">
                <div className="w-16 h-16 bg-slate-50 rounded-2xl flex items-center justify-center mb-8 group-hover:bg-blue-700 group-hover:text-white transition-colors">
                  {prog.icon}
                </div>
                <h3 className="text-2xl font-black text-slate-900 mb-4 tracking-tight">{prog.title}</h3>
                <p className="text-slate-500 leading-relaxed mb-8 text-lg">{prog.desc}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* --- Section Galerie Photos --- */}
      <section id="galerie" className="py-32 bg-white">
        <div className="container mx-auto px-6">
          <div className="flex flex-col md:flex-row justify-between items-end mb-16 gap-6">
            <div className="max-w-2xl">
              <div className="flex items-center gap-3 text-blue-700 font-bold mb-4">
                <Camera size={24} />
                <span>Patrimoine & Vie Locale</span>
              </div>
              <h2 className="text-5xl font-black text-slate-900 tracking-tighter">Donzy en Images</h2>
              <p className="text-xl text-slate-600 mt-4">Redécouvrons ensemble la beauté et le dynamisme de notre commune.</p>
            </div>
          </div>

          <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            {donzyGallery.map((item, index) => (
              <div key={index} className="relative group rounded-3xl overflow-hidden aspect-[4/3] shadow-lg">
                <img 
                  src={item.img} 
                  alt={item.title} 
                  className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
                />
                <div className="absolute inset-0 bg-gradient-to-t from-slate-900/90 via-slate-900/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-8">
                  <p className="text-white text-xl font-bold">{item.title}</p>
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* --- Section Agir --- */}
      <section id="agir" className="py-32 bg-blue-800 text-white">
        <div className="container mx-auto px-6 text-center">
          <div className="max-w-4xl mx-auto">
            <Users size={64} className="mx-auto mb-10 opacity-50" />
            <h2 className="text-5xl md:text-7xl font-black mb-8 tracking-tighter">L'avenir se construit ensemble.</h2>
            <p className="text-2xl text-blue-100 mb-16 leading-relaxed">
              Donzy a besoin de toutes les énergies. Rejoignez le comité de soutien pour porter notre vision.
            </p>
            
            <div className="bg-white p-3 rounded-3xl shadow-2xl flex flex-col md:flex-row items-center gap-4 max-w-2xl mx-auto">
              <input 
                type="email" 
                placeholder="Votre email" 
                className="w-full bg-transparent px-6 py-4 text-slate-900 text-xl outline-none"
              />
              <button className="w-full md:w-auto bg-blue-700 hover:bg-blue-900 text-white px-10 py-4 rounded-2xl font-bold text-xl transition-all">
                Je m'inscris
              </button>
            </div>
          </div>
        </div>
      </section>

      {/* --- Footer --- */}
      <footer className="bg-slate-950 text-white pt-32 pb-16">
        <div className="container mx-auto px-6">
          <div className="grid lg:grid-cols-4 gap-16 mb-20">
            <div className="col-span-2">
              <div className="flex items-center gap-3 mb-8">
                <div className="w-12 h-12 bg-blue-800 rounded-xl flex items-center justify-center font-black text-2xl">AP</div>
                <span className="text-3xl font-black tracking-tighter">AGATHE PERNOLLET 2026</span>
              </div>
              <p className="text-xl text-slate-400 max-w-lg mb-10 leading-relaxed">
                Pour un Donzy solidaire, dynamique et respectueux de son environnement. Votre voix compte pour 2026.
              </p>
              <div className="flex gap-4">
                {[Facebook, Twitter, Instagram, Linkedin].map((Icon, i) => (
                  <a key={i} href="#" className="w-14 h-14 rounded-2xl bg-white/5 flex items-center justify-center text-white hover:bg-blue-700 transition-all border border-white/10">
                    <Icon size={24} />
                  </a>
                ))}
              </div>
            </div>
            
            <div>
              <h4 className="text-lg font-bold mb-8 uppercase tracking-widest text-blue-400">Navigation</h4>
              <ul className="space-y-4 text-lg text-slate-400">
                <li><button onClick={() => scrollToSection('la-candidate')} className="hover:text-white">La Candidate</button></li>
                <li><button onClick={() => scrollToSection('la-liste')} className="hover:text-white">La Liste</button></li>
                <li><button onClick={() => scrollToSection('programme')} className="hover:text-white">Programme</button></li>
                <li><button onClick={() => scrollToSection('galerie')} className="hover:text-white">Galerie Photos</button></li>
                <li><button onClick={() => scrollToSection('agir')} className="hover:text-white">Agir</button></li>
              </ul>
            </div>

            <div>
              <h4 className="text-lg font-bold mb-8 uppercase tracking-widest text-blue-400">Contact Donzy</h4>
              <div className="space-y-6 text-slate-400">
                <div className="flex gap-4">
                  <MapPin className="text-blue-500 shrink-0" />
                  <p>Permanence électorale<br/>Place de la Mairie, 58220 Donzy</p>
                </div>
                <div className="flex gap-4 items-center">
                  <Mail className="text-blue-500 shrink-0" />
                  <a href="mailto:contact@donzy-demain.fr" className="hover:text-white">contact@donzy-demain.fr</a>
                </div>
              </div>
            </div>
          </div>
          
          <div className="pt-10 border-t border-white/10 text-center text-slate-500">
            <p>&copy; 2026 Agathe Pernollet • Donzy Demain. Tous droits réservés.</p>
          </div>
        </div>
      </footer>

      <style>{`
        @keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }
        .animate-fade-in { animation: fade-in 0.4s ease-out forwards; }
      `}</style>
    </div>
  );
};

export default App;